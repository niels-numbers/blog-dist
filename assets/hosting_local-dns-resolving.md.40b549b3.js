import{_ as s,c as e,o as a,a as n}from"./app.cdc7ec24.js";const g=JSON.parse('{"title":"Fix NXDOMAIN for new subdomains","description":"","frontmatter":{},"headers":[{"level":2,"title":"Quick test","slug":"quick-test","link":"#quick-test","children":[]},{"level":2,"title":"Persistent fix","slug":"persistent-fix","link":"#persistent-fix","children":[]}],"relativePath":"hosting/local-dns-resolving.md"}'),o={name:"hosting/local-dns-resolving.md"},t=n(`<h1 id="fix-nxdomain-for-new-subdomains" tabindex="-1">Fix NXDOMAIN for new subdomains <a class="header-anchor" href="#fix-nxdomain-for-new-subdomains" aria-hidden="true">#</a></h1><p>When creating a new subdomain (like <code>sub.example.com</code>) and setting the A record, I often can\u2019t open the page on my Ubuntu machine \u2014 even though DNS is already active globally.</p><p>Ubuntu uses <code>systemd-resolved</code> via <code>127.0.0.53</code>, which sometimes caches outdated or missing DNS entries too aggressively.</p><h2 id="quick-test" tabindex="-1">Quick test <a class="header-anchor" href="#quick-test" aria-hidden="true">#</a></h2><p>Use an external DNS resolver directly:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">dig sub.example.com @8.8.8.8</span></span>
<span class="line"></span></code></pre></div><p>\u2192 If that works but <code>dig sub.example.com</code> without <code>@8.8.8.8</code> returns <code>NXDOMAIN</code>, your local DNS is outdated.</p><h2 id="persistent-fix" tabindex="-1">Persistent fix <a class="header-anchor" href="#persistent-fix" aria-hidden="true">#</a></h2><p>Tell Ubuntu to use public DNS resolvers.</p><p>Edit:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">sudo nano /etc/systemd/resolved.conf</span></span>
<span class="line"></span></code></pre></div><p>Set in the <code>[Resolve]</code> block:</p><div class="language-ini"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki"><code><span class="line"><span style="color:#F07178;">DNS</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">8.8.8.8</span></span>
<span class="line"><span style="color:#F07178;">FallbackDNS</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">1.1.1.1</span></span>
<span class="line"></span></code></pre></div><ul><li><code>8.8.8.8</code> = Google DNS (fast and reliable)</li><li><code>1.1.1.1</code> = Cloudflare DNS (privacy-focused fallback)</li></ul><p>Restart the resolver:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">sudo systemctl restart systemd-resolved</span></span>
<span class="line"></span></code></pre></div><p>Now <code>dig sub.example.com</code> should work normally again.</p>`,17),l=[t];function i(c,d,p,r,u,h){return a(),e("div",null,l)}const m=s(o,[["render",i]]);export{g as __pageData,m as default};
